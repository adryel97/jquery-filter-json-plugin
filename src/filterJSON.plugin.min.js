/*
 * jQuery Filter JSON Plugin
 * Copyright (c) 2012 Kapil Kashyap
 *
 * Depends:
 *   - jQuery 1.6+
 *
 * Dual licensed under the MIT and GPL licenses:
 *   - http://www.opensource.org/licenses/mit-license.php
 *   - http://www.gnu.org/licenses/gpl.html
 */
!function(e){e.extend(e.fn,{filterJSON:function(t,r){var o={property:null,value:"",wrapper:!1,checkContains:!1,startsWith:!1,matchCase:!1,avoidDuplicates:!1},i=function(t,r){var o=null;return(e.isEmptyObject(r.property)||!r.property[0])&&(o="config.property is required to filter the JSON object."),e.isEmptyObject(o)?(t&&"object"==typeof t&&e.each(t,function(o,n){if(-1!=e.inArray(o,r.property)){var a=function(t,o){var i=r.wrapper?t:o;r.avoidDuplicates?-1==e.inArray(i,l.filteredJSON)&&l.filteredJSON.push(i):l.filteredJSON.push(i)};if(r.value){var c=e.isArray(r.value)?r.value:[r.value],p={},s=Object.prototype.toString.call(n),f=function(o,l,n){if("[object String]"===o){var c=l.toLowerCase(),s=n.toLowerCase();r.matchCase?(l==n||!r.startsWith&&r.checkContains&&-1!=l.indexOf(n)||r.startsWith&&0==l.indexOf(n))&&a(t,l):(c==s||!r.startsWith&&r.checkContains&&-1!=c.indexOf(s)||r.startsWith&&0==c.indexOf(s))&&a(t,l)}else if("[object Number]"===o)(l===parseInt(n)||l===parseFloat(n))&&a(t,l);else if("[object Boolean]"===o){var u=!1;"[object String]"===Object.prototype.toString.call(n)&&"true"==n.toLowerCase()&&(u=!0),l===u&&a(t,l)}else if("[object Array]"===o){if(l.length>0)for(k in l)f(Object.prototype.toString.call(l[k]),l[k],n)}else"[object Object]"===o&&(e.extend(p,r,{value:n}),i(l,p))};if(c.forEach)c.forEach(function(e){f(s,n,e)});else for(k in c)c.hasOwnProperty(k)&&f(s,n,c[k])}else a(t,n)}i(n,r)}),l):void(window.console?console.error?console.error(o):console.log(o):alert(o))},l={filteredJSON:[]},n=null,a=null,c=null;return e.extend(o,r),c=o.property,"[object String]"===Object.prototype.toString.call(c)&&(c=c.replace(/\s/g,""),o.property=c.split(",")),c=null,o.wrapper&&o.property&&o.property.length>1&&void 0==r.avoidDuplicates&&(o.avoidDuplicates=!0),n=i(t,o),n&&n.filteredJSON&&(a=n.filteredJSON.length>0?n.filteredJSON:n.filteredJSON[0]),e(a)}})}(jQuery);