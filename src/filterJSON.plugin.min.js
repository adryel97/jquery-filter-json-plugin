/*
 * jQuery Filter JSON Plugin
 * Copyright (c) 2012 Kapil Kashyap
 *
 * Depends:
 *   - jQuery 1.6+
 *
 * Dual licensed under the MIT and GPL licenses:
 *   - http://www.opensource.org/licenses/mit-license.php
 *   - http://www.gnu.org/licenses/gpl.html
 */
!function(e){e.extend(e.fn,{filterJSON:function(r,t){var o={STRING:"[object String]",NUMBER:"[object Number]",BOOLEAN:"[object Boolean]",ARRAY:"[object Array]",OBJECT:"[object Object]",FUNCTION:"[object Function]"},a=function(e){return Object.prototype.toString.call(e)},i={property:null,value:"",wrapper:!1,checkContains:!1,startsWith:!1,matchCase:!1,avoidDuplicates:!1,sort:!1,sortOrder:"asc",sortProperty:null,comparator:function(e,r){var t="asc"!==i.sortOrder?-1:1,o=i.sortProperty||i.property[0]||i.property,e=e[o]||e,r=r[o]||r;return r>e?-1*t:e>r?1*t:0}},n=function(r,t){var i=null;return(e.isEmptyObject(t.property)||!t.property[0])&&(i="config.property is required to filter the JSON object."),e.isEmptyObject(i)?(r&&"object"==typeof r&&e.each(r,function(i,s){if(-1!=e.inArray(i,t.property)){var c=function(r,o){var a=t.wrapper?r:o;t.avoidDuplicates?-1==e.inArray(a,l.filteredJSON)&&l.filteredJSON.push(a):l.filteredJSON.push(a)};if(t.value){var p=e.isArray(t.value)?t.value:[t.value],f={},u=a(s),O=function(i,l,s){if(i===o.STRING){var p=l.toLowerCase(),u=s.toLowerCase();t.matchCase?(l==s||!t.startsWith&&t.checkContains&&-1!=l.indexOf(s)||t.startsWith&&0==l.indexOf(s))&&c(r,l):(p==u||!t.startsWith&&t.checkContains&&-1!=p.indexOf(u)||t.startsWith&&0==p.indexOf(u))&&c(r,l)}else if(i===o.NUMBER)(l===parseInt(s)||l===parseFloat(s))&&c(r,l);else if(i===o.BOOLEAN){var d=!1;a(s)===o.STRING&&"true"==s.toLowerCase()&&(d=!0),l===d&&c(r,l)}else if(i===o.ARRAY){if(l.length>0)for(k in l)O(a(l[k]),l[k],s)}else i===o.OBJECT&&(e.extend(f,t,{value:s}),n(l,f))};if(p.forEach)p.forEach(function(e){O(u,s,e)});else for(k in p)p.hasOwnProperty(k)&&O(u,s,p[k])}else c(r,s)}n(s,t)}),l):void(window.console?console.error?console.error(i):console.log(i):alert(i))},l={filteredJSON:[]},s=null,c=null,p=null,f=!1;return e.extend(i,t),p=i.property,a(p)===o.STRING&&(p=p.replace(/\s/g,""),i.property=p.split(",")),p=null,i.wrapper&&i.property&&i.property.length>1&&void 0==t.avoidDuplicates&&(i.avoidDuplicates=!0),s=n(r,i),s&&s.filteredJSON&&(c=s.filteredJSON.length>0?s.filteredJSON:s.filteredJSON[0]),i.sort&&a(c)===o.ARRAY&&(i.comparator&&a(i.comparator)===o.FUNCTION&&a(c[0])===o.OBJECT&&(c.sort(i.comparator),f=!0),!f&&c.sort(i.comparator)),e(c)}})}(jQuery);